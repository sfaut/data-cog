# COG -- Code Officiel G√©ographique de France

- [README](https://github.com/sfaut/data-cog/tree/master/README.md)
- [ETL SQL et donn√©es 2025](https://github.com/sfaut/data-cog/tree/master/v2025/)

- [Pr√©sentation](#pr√©sentation)
- [Dessins](#dessins)
- [Exemples d'utilisation](#exemples)
  - [DuckDB](#duckdb)
  - [PHP](#php)
  - [Python](#python)

## Pr√©sentation

L'<abbr title="Institut National de la Statistique et des √âtudes √âconomiques">INSEE</abbr>
fournit, via le Code Officiel G√©ographique (<abbr title="Code Officiel G√©ographique">COG</abbr>),
des fichiers annuels relatifs aux communes, cantons, arrondissements,
collectivit√©s territoriales exer√ßant des comp√©tences d√©partementales,
d√©partements et r√©gions de France, ainsi qu'aux pays et territoires √©trangers.

Ce d√©p√¥t propose ces donn√©es dans diff√©rents formats plats (CSV, JSON, ND-JSON, Parquet)
et au format DuckDB.

Le sch√©ma de base de donn√©es n'a pas vocation √† √™tre 3NF,
ni m√™me l'ambition d'√™tre optimis√© pour des traitements lourds.
Par exemple, les identifiants naturels texte ont √©t√© conserv√©s tels quels et promus clef primaire.

## Dessins

### G√©n√©ral

| Colonne COG | Description COG                               | Colonne sfaut\data-cog |
|------------:|----------------------------------------------:|-----------------------:|
| `LIBELLE`   | Nom en clair (typographie riche) avec article | `name`                 |
| `NCCENR`    | Nom en clair (typographie riche)              | `single_name`          |
| `NCC`       | Nom en clair (majuscules)                     | `simple_name`          |

### `article`

| Colonne     | Type       | Description                                                  |
|------------:|-----------:|--------------------------------------------------------------|
| id üîë      | `UTINYINT` | Identifiant num√©rique COG                                    |
| article     | `VARCHAR`  | Article, ex. *Les* pour *Les Hauts-de-Seine*                 |
| preposition | `VARCHAR`  | Pr√©position, ex. *des* pour *D√©partement des Hauts-de-Seine* |
| comment     | `VARCHAR`  | --                                                           |

### `country`

| Colonne               | Type        | Description                                                      |
|----------------------:|------------:|------------------------------------------------------------------|
| code üîë              | `VARCHAR`   | Code identifiant COG sur 5 caract√®res, ex. *99100*               |
| iso2_code             | `VARCHAR`   | Code alphab√©tique ISO sur 2 caract√®res, ex. *FR*                 |
| iso3_code             | `VARCHAR`   | Code alphab√©tique ISO sur 3 caract√®res, ex. *FRA*                |
| num3_code             | `VARCHAR`   | Code num√©rique ISO sur 3 caract√®res, ex. *250*                   |
| name                  | `VARCHAR`   | Nom court, ex. *France*                                          |
| official_name         | `VARCHAR`   | Nom officiel, ex. *R√©publique fran√ßaise*                         |
| actual_id üîó         | `UTINYINT`  | Code actualit√©                                                   |
| actual_name           | `VARCHAR`   | D√©codage du code actualit√©                                       |
| parent_code üîó       | `VARCHAR`   | Code du pays de rattachement, ex. pour Hong Kong *99216* (Chine) |
| first_appearance_year | `USMALLINT` | Ann√©e de 1re apparition dans le COG                              |

### `region`

| Colonne          | Type       | Description                                                                                        |
|-----------------:|-----------:|----------------------------------------------------------------------------------------------------|
| code üîë         | `VARCHAR`  | Code sur 2 caract√®res                                                                              |
| name             | `VARCHAR`  | Nom, ex. *Provence-Alpes-C√¥te d'Azur*                                                              |
| single_name      | `VARCHAR`  | Nom sans article                                                                                   |
| simple_name      | `VARCHAR`  | Nom en lettres capitales, sans article et sans caract√®re sp√©cial, ex. *PROVENCE ALPES COTE D AZUR* |
| identity         | `VARCHAR`  | Code suivi du nom, ex. *53 ‚Äì Bretagne*                                                             |
| group_name       | `VARCHAR`  | Groupe nominale, ex. *R√©gion de Bretagne*                                                          |
| is_metropolitan  | `BOOLEAN`  | Indique si la r√©gion est m√©tropolitaine                                                            |
| article_id üîó   | `UTINYINT` | Identifiant du type de nom                                                                         |
| article          | `VARCHAR`  | Article                                                                                            |
| preposition      | `VARCHAR`  | Pr√©position                                                                                        |
| capital_code üîó | `VARCHAR`  | Code commune du chef-lieu, ex. *35238*                                                             |
| capital_name     | `VARCHAR`  | Nom du chef-lieu, ex. *Rennes*                                                                     |

### `collectivity`

| Colonne          | Type      | Description                                                                                                |
|-----------------:|----------:|------------------------------------------------------------------------------------------------------------|
| code üîë         | `VARCHAR` | Code sur 3 caract√®res, ex. *73D*                                                                           |
| name             | `VARCHAR` | Nom, ex. *Conseil d√©partemental de La Savoie*                                                              |
| single_name      | `VARCHAR` | Nom sans article, ex. *Conseil d√©partemental de La Savoie*                                                 |
| simple_name      | `VARCHAR` | Nom en lettres capitales, sans article et sans caract√®re sp√©cial, ex. *CONSEIL DEPARTEMENTAL DE LA SAVOIE* |
| identity         | `VARCHAR` | Code suivi du nom, ex. *73D ‚Äì Conseil d√©partemental de La Savoie*                                          |
| is_metropolitan  | `BOOLEAN` | Indique si la collectivit√© est m√©tropolitaine                                                              |
| capital_code üîó | `VARCHAR` | Code commune du chef-lieu, ex. *73065*                                                                     |
| capital_name     | `VARCHAR` | Nom du chef-lieu, ex. *Annecy*                                                                             |
| region_code üîó  | `VARCHAR` | Code de la r√©gion sur 2 caract√®res                                                                         |
| region_name      | `VARCHAR` | Nom de la r√©gion                                                                                           |
| region_identity  | `VARCHAR` | Code et nom de la r√©gion                                                                                   |

### `department`

| Colonne         | Type       | Description                                                                    |
|----------------:|-----------:|--------------------------------------------------------------------------------|
| code üîë        | `VARCHAR`  | Code sur 2 caract√®res (3 pour l'outre-mer), ex. *85*                           |
| name            | `VARCHAR`  | Nom, ex. *Vend√©e*                                                              |
| single_name     | `VARCHAR`  | Nom sans article, ex. *Vend√©e*                                                 |
| simple_name     | `VARCHAR`  | Nom en lettres capitales, sans article et sans caract√®re sp√©cial, ex. *VENDEE* |
| identity        | `VARCHAR`  | Code suivi du nom, ex. *85 ‚Äì Vend√©e*                                           |
| group_name      | `VARCHAR`  | Groupe nominale, ex. *D√©partement de Vend√©e*                                   |
| is_metropolitan | `BOOLEAN`  | Indique si le d√©partement est m√©tropolitain                                    |
| article_id üîó  | `UTINYINT` | Identifiant du type de nom                                                     |
| article         | `VARCHAR`  | Article, ex. *La* pour *La Vend√©e*                                             |
| preposition     | `VARCHAR`  | Pr√©position, ex. *de La* pour *D√©partement de La Vend√©e*                       |
| capital_code üîó| `VARCHAR`  | Code commune du chef-lieu, ex. *85191*                                         |
| capital_name    | `VARCHAR`  | Nom du chef-lieu, ex. *La Roche-sur-Yon*                                       |
| region_code üîó | `VARCHAR`  | Code de la r√©gion sur 2 caract√®res                                             |
| region_name     | `VARCHAR`  | Nom de la r√©gion                                                               |
| region_identity | `VARCHAR`  | Code et nom de la r√©gion                                                       |

### `arrondissement`

| Colonne             | Type       | Description                                                                   |
|--------------------:|-----------:|-------------------------------------------------------------------------------|
| code üîë            | `VARCHAR`  | Code sur 3 caract√®res (4 pour l'outre-mer), ex. *513*                         |
| name                | `VARCHAR`  | Nom, ex. *Reims*                                                              |
| single_name         | `VARCHAR`  | Nom sans article, ex. *Reims*                                                 |
| simple_name         | `VARCHAR`  | Nom en lettres capitales, sans article et sans caract√®re sp√©cial, ex. *REIMS* |
| identity            | `VARCHAR`  | Code suivi du nom, ex. *513 ‚Äì Reims*                                          |
| group_name          | `VARCHAR`  | Groupe nominal, ex. *Arrondissement de Reims*                                 |
| is_metropolitan     | `BOOLEAN`  | Indique si l'arrondissement est m√©tropolitain                                 |
| article_id üîó      | `UTINYINT` | Identifiant du type de nom                                                    |
| article             | `VARCHAR`  | Article                                                                       |
| preposition         | `VARCHAR`  | Pr√©position                                                                   |
| capital_code üîó    | `VARCHAR`  | Code commune du chef-lieu, ex. *51454*                                        |
| capital_name        | `VARCHAR`  | Nom du chef-lieu, ex. *Reims*                                                 |
| region_code üîó     | `VARCHAR`  | Code de la r√©gion                                                             |
| region_name         | `VARCHAR`  | Nom de la r√©gion                                                              |
| region_identity     | `VARCHAR`  | Code et nom de la r√©gion                                                      |
| department_code üîó | `VARCHAR`  | Code du d√©partement                                                           |
| department_name     | `VARCHAR`  | Nom du d√©partement                                                            |
| department_identity | `VARCHAR`  | Code et nom du d√©partement                                                    |

### `canton`

| Colonne             | Type       | Description                                                                             |
|--------------------:|-----------:|-----------------------------------------------------------------------------------------|
| code üîë            | `VARCHAR`  | Code sur 4 caract√®res, ex. *8512*                                                       |
| name                | `VARCHAR`  | Nom, ex. *La Roche-sur-Yon-1*                                                           |
| single_name         | `VARCHAR`  | Nom sans article, ex. *Roche-sur-Yon-1*                                                 |
| simple_name         | `VARCHAR`  | Nom en lettres capitales, sans article et sans caract√®re sp√©cial, ex. *ROCHE SUR YON 1* |
| identity            | `VARCHAR`  | Code suivi du nom, ex. *8512 ‚Äì La Roche-sur-Yon-1*                                      |
| group_name          | `VARCHAR`  | Groupe nominal, ex. *Canton de La Roche-sur-Yon-1*                                      |
| type_code üîó       | `VARCHAR`  | Parmi *C*, *N* et *V*                                                                   |
| type_name           | `VARCHAR`  | Type d√©cod√© :<br>*C* = Canton<br>*N* = Canton ¬´ fictif ¬ª pour communes nouvelles<br>*V* = Canton-Ville (ou pseudo-canton) |
| composition_id üîó  | `UTINYINT` | Parmi *0..5*                                                                            |
| composition_name    | `VARCHAR`  | Composition d√©cod√©e :<br>*0* = Non applicable<br>*1* = Canton compos√© de commune(s) enti√®re(s)<br>*2* = Canton compos√© d'une fraction d'une commune et de commune(s) enti√®re(s)<br>*3* = Canton compos√© de fractions de plusieurs communes et de commune(s) enti√®re(s)<br>*4* = Canton compos√© d'une fraction de commune<br>*5* = Canton compos√© de fractions de plusieurs communes |
| is_metropolitan     | `BOOLEAN`  | Indique si le canton est m√©tropolitain                                                  |
| article_id üîó      | `UTINYINT` | Identifiant du type de nom                                                              |
| article             | `VARCHAR`  | Article                                                                                 |
| preposition         | `VARCHAR`  | Pr√©position                                                                             |
| capital_code üîó    | `VARCHAR`  | Code commune du bureau central                                                          |
| capital_name        | `VARCHAR`  | Nom de la commune du bureau central                                                     |
| region_code üîó     | `VARCHAR`  | Code de la r√©gion                                                                       |
| region_name         | `VARCHAR`  | Nom de la r√©gion                                                                        |
| region_identity     | `VARCHAR`  | Code et nom de la r√©gion                                                                |
| department_code üîó | `VARCHAR`  | Code du d√©partement                                                                     |
| department_name     | `VARCHAR`  | Nom du d√©partement                                                                      |
| department_identity | `VARCHAR`  | Code et nom du d√©partement                                                              |

### `commune`

| Colonne                 | Type       | Description                                                                                                                    |
|------------------------:|-----------:|--------------------------------------------------------------------------------------------------------------------------------|
| key üîë                 | `VARCHAR`  | Clef primaire compos√©e du code commune et du type commune                                                                      |
| code                    | `VARCHAR`  | Code sur 5 caract√®res                                                                                                          |
| type_code               | `VARCHAR`  | Parmi *COM*, *COMA*, *COMD* et *ARM*                                                                                           |
| type_name               | `VARCHAR`  | Type d√©cod√© :<br>*COM* = Commune<br>*COMA* = Commune associ√©e<br>*COMD* = Commune d√©l√©gu√©e<br>*ARM* = Arrondissement municipal |
| parent_code üîó         | `VARCHAR`  | Code de la commune parent, pour les commune *COMA*, *COMD* et *ARM*                                                            |
| name                    | `VARCHAR`  | Nom, ex. *L'√éle-d'Yeu*                                                                                                         |
| single_name             | `VARCHAR`  | Nom sans article, ex. *√éle-d'Yeu*                                                                                              |
| simple_name             | `VARCHAR`  | Nom en lettres capitales, sans article et sans caract√®re sp√©cial, ex. *ILE D YEU*                                              |
| identity                | `VARCHAR`  | Code suivi du nom, ex. *85113 ‚Äì L'√éle-d'Yeu*                                                                                   |
| group_name              | `VARCHAR`  | Groupe nominal, ex. *Commune de L'√éle-d'Yeu*                                                                                   |
| is_metropolitan         | `BOOLEAN`  | Indique si la commune est m√©tropolitaine                                                                                       |
| article_id üîó          | `UTINYINT` | Identifiant du type de nom                                                                                                     |
| article                 | `VARCHAR`  | Article                                                                                                                        |
| preposition             | `VARCHAR`  | Pr√©position                                                                                                                    |
| region_code üîó         | `VARCHAR`  | Code de la r√©gion                                                                                                              |
| region_name             | `VARCHAR`  | Nom de la r√©gion                                                                                                               |
| region_identity         | `VARCHAR`  | Code et nom de la r√©gion                                                                                                       |
| collectivity_code üîó   | `VARCHAR`  | Code de la r√©gion                                                                                                              |
| collectivity_name       | `VARCHAR`  | Nom de la r√©gion                                                                                                               |
| collectivity_identity   | `VARCHAR`  | Code et nom de la r√©gion                                                                                                       |
| department_code üîó     | `VARCHAR`  | Code du d√©partement                                                                                                            |
| department_name         | `VARCHAR`  | Nom du d√©partement                                                                                                             |
| department_identity     | `VARCHAR`  | Code et nom du d√©partement                                                                                                     |
| arrondissement_code üîó | `VARCHAR`  | Code de l'arrondissement                                                                                                       |
| arrondissement_name     | `VARCHAR`  | Nom de l'arrondissement                                                                                                        |
| arrondissement_identity | `VARCHAR`  | Code et nom de l'arrondissement                                                                                                |
| canton_code üîó         | `VARCHAR`  | Code du canton                                                                                                                 |
| canton_name             | `VARCHAR`  | Nom du canton                                                                                                                  |
| canton_identity         | `VARCHAR`  | Code et nom du canton                                                                                                          |

### `commune_unique`

La table `commune_unique` reprend les lignes de la table `commune` de type `COM`, `COMA` et `ARM`.

Cela permet d'avoir une unicit√© sur la colonne `commune_unique.code` et de promouvoir cette derni√®re clef primaire.

√Ä l'exception de la colonne `key` d√©sormais inutile et absente,
la table `communue_unique` a la m√™me structure que la table `commune`.

## Exemples

### DuckDB

La base de donn√©es contient un sch√©ma unique nomm√© `cog`.

Avec le terminal DuckDB :

```sql
install httpfs;
load httpfs;

attach or replace 'https://github.com/sfaut/data-cog/raw/refs/heads/master/v2025/cog@2025.duckdb' as my_db;

from my_db.cog.department
select all
    region_identity as R√©gion, is_metropolitan as "Est m√©tropolitaine ?",
    identity as D√©partment, group_name as "Libell√© d√©partement"
order by all asc;
```

| R√©gion             | Est m√©tropolitaine ? | D√©partment          | Libell√© d√©partement            |
|-------------------:|---------------------:|--------------------:|-------------------------------:|
| 01 ‚Äì Guadeloupe    | false                | 971 ‚Äì Guadeloupe    | D√©partement de La Guadeloupe   |
| 02 ‚Äì Martinique    | false                | 972 ‚Äì Martinique    | D√©partement de La Martinique   |
| 03 ‚Äì Guyane        | false                | 973 ‚Äì Guyane        | D√©partement de La Guyane       |
| 04 ‚Äì La R√©union    | false                | 974 ‚Äì La R√©union    | D√©partement de La R√©union      |
| 06 ‚Äì Mayotte       | false                | 976 ‚Äì Mayotte       | D√©partement de Mayotte         |
| 11 ‚Äì √éle-de-France | true                 | 75 ‚Äì Paris          | D√©partement de Paris           |
| 11 ‚Äì √éle-de-France | true                 | 77 ‚Äì Seine-et-Marne | D√©partement de Seine-et-Marne  |
| 11 ‚Äì √éle-de-France | true                 | 78 ‚Äì Yvelines       | D√©partement des Yvelines       |
| 11 ‚Äì √éle-de-France | true                 | 91 ‚Äì Essonne        | D√©partement de L'Essonne       |
| 11 ‚Äì √éle-de-France | true                 | 92 ‚Äì Hauts-de-Seine | D√©partement des Hauts-de-Seine |
| ...

### PHP

```php
<?php

$url = 'https://github.com/sfaut/data-cog/raw/refs/heads/master/v2025/cog-departments@2025.csv';

$stream = fopen($url, mode: 'r');

$csv_options = ['separator' => ',', 'enclosure' => '"', 'escape' => '"'];

$header = fgetcsv($stream, ...$csv_options);

$data = [];
while ($record = fgetcsv($stream, ...$csv_options)) {
    $record = array_combine($header, $record);
    $data[] = $record;
}

print_r($data);
```

### Python

```python
import csv
import io
import urllib.request

url = "https://github.com/sfaut/data-cog/raw/refs/heads/master/v2025/cog-departments@2025.csv"

with urllib.request.urlopen(url) as response:
    io_wrapper = io.TextIOWrapper(response, encoding="utf-8")
    csv_reader = csv.DictReader(io_wrapper)
    data = list(csv_reader)

print(data)
```
